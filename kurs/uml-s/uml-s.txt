@startuml
skinparam monochrome true

actor Оператор as u
participant "Фронтенд" as f
participant "Бэкенд" as b
database "База данных" as d
participant "Контроллер 3d принтеров" as e

u -> f : Загрузка файла 3d модели на систему управления контроллерами
activate f

f -> b : Файл модели
activate b
b -> d : Запись  данных в БД
b -> d : Запрос на проверку данных в БД
activate d
d -> d : Запись данных
d -> b : Ответ об успешной записи
deactivate d
b -> f : Текстовая строка
deactivate b
f -> u : Сообщение об успешной загрузки файла модели
deactivate f

u -> f : Создание производственной задачи
activate f
f -> e : Проверка доступности сетевого доступа 
e -> f : Подтверждение доступности контроллера
f -> b : Запрос на размещение производственной задачи 
activate b
b -> d : Запрос на проверку доступности связи с БД
activate d
d -> b : Ответ от БД
b -> e : Проверка состояния 3d принтера
e -> b : Данные о состоянии оборудования
b -> e : Открытие канала загрузки модели на контроллер
e -> b : Подтверждение целостности канала передачи 
d -> e : Передача файла 3d модели
e -> d : Оповещение об успешной загрузке файла с хеш суммой
b -> d : Проверка хеш сумм файла 3d модели в бд и на контроллере
b -> d : Удаление временного буфера хранения хеш сумм
d -> b : Системное оповещение о соответсвии хеш сумм
b -> e : Отправка команды управляющего действия для конечного оборудования
e -> b : Подтверждения о начале выполнения производственной задачи
b -> d : Запись данных
deactivate d
b -> f : Подтверждение о начале выполнения производственной задачи
f -> u : Обновления статуса производственного задания в личном кабинете
f -> u : Обновления статусов состояния оборудования в личном кабинете
deactivate f
@enduml